# Prometheus 配置文件\n# 用於監控 NEXUS 應用\n\nglobal:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n  external_labels:\n    monitor: 'nexus-monitor'\n    environment: 'production'\n\n# 告警管理器配置\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n            - localhost:9093\n\n# 告警規則文件\nrule_files:\n  - 'alert_rules.yml'\n\n# 抓取配置\nscrape_configs:\n  # Prometheus 自身\n  - job_name: 'prometheus'\n    static_configs:\n      - targets: ['localhost:9090']\n\n  # NEXUS 應用\n  - job_name: 'nexus-app'\n    scrape_interval: 10s\n    scrape_timeout: 5s\n    metrics_path: '/metrics'\n    static_configs:\n      - targets: ['localhost:3000']\n        labels:\n          service: 'nexus-api'\n          instance: 'nexus-api-1'\n\n  # 部署服務\n  - job_name: 'nexus-deployment'\n    scrape_interval: 5s\n    scrape_timeout: 3s\n    metrics_path: '/metrics/deployment'\n    static_configs:\n      - targets: ['localhost:3001']\n        labels:\n          service: 'nexus-deployment'\n          instance: 'nexus-deployment-1'\n\n  # Gas 管理服務\n  - job_name: 'nexus-gas'\n    scrape_interval: 10s\n    scrape_timeout: 5s\n    metrics_path: '/metrics/gas'\n    static_configs:\n      - targets: ['localhost:3002']\n        labels:\n          service: 'nexus-gas'\n          instance: 'nexus-gas-1'\n\n  # 告警服務\n  - job_name: 'nexus-alerts'\n    scrape_interval: 10s\n    scrape_timeout: 5s\n    metrics_path: '/metrics/alerts'\n    static_configs:\n      - targets: ['localhost:3003']\n        labels:\n          service: 'nexus-alerts'\n          instance: 'nexus-alerts-1'\n\n  # Node Exporter (系統指標)\n  - job_name: 'node'\n    scrape_interval: 15s\n    static_configs:\n      - targets: ['localhost:9100']\n        labels:\n          instance: 'nexus-server'\n\n  # 數據庫指標\n  - job_name: 'mysql'\n    scrape_interval: 15s\n    static_configs:\n      - targets: ['localhost:3306']\n        labels:\n          service: 'mysql'\n          instance: 'nexus-db'\n\n# 服務發現配置（可選）\n# - job_name: 'kubernetes-pods'\n#   kubernetes_sd_configs:\n#     - role: pod\n#   relabel_configs:\n#     - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]\n#       action: keep\n#       regex: true\n
